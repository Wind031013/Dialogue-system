# 🤖 Dialogue System - 基于 RAG 与文学作品语料的角色对话模型构建与应用

## 📄 标题选择（待定）

- ~~ 基于小说文本的个性化对话智能体设计 ~~
- ~~ 基于文学作品的虚拟角色对话系统设计与实现 ~~
- ~~ 数字角色塑造：从小说文本到个性化对话智能体 ~~
- ~~ 基于小说对话抽取与预训练模型微调的个性化对话系统研究 ~~
- 赋予机器灵魂：基于文学作品的虚拟角色对话系统设计与实现
- 基于 RAG 与文学作品语料的角色对话模型构建与应用

## 📝 项目简介

本项目是一个基于小说内容的 AI 对话系统，允许用户通过主角的视角与小说中的角色进行沉浸式对话。系统通过微调语言模型，结合小说特定内容，为用户提供与小说角色互动的体验。

微调的目的是让模型学会药老的说话风格、语气和性格，而不是记忆所有知识。知识由 RAG 负责。

<!-- ## 功能特点 -->

## 模型微调部分

- 模型微调目的：让模型学会药老的说话风格、语气和性格，而不是记忆所有知识。知识由 RAG 负责。

### 阶段一：数据获取与预处理

#### 源数据获取

- 使用网络爬虫技术从小说网站获取原始文本数据

#### 数据预处理

- 清理无用信息（作者信息、章节标题、空行等）
- 通过 api 调用筛选出原文中的对话对数据

#### 多轮对话数据格式

```json
{
  "conversations": [
    {
      "role": "system",
      "content": "system_prompt"
    },
    {
      "role": "user",
      "content": "input_content"
    },
    {
      "role": "assistant",
      "content": "output_content"
    },
    {
      "role": "user",
      "content": "input_content"
    },
    {
      "role": "assistant",
      "content": "output_content"
    }
  ]
}
```

#### 单轮对话数据格式

```json
{
  "system_prompt": "system_prompt",
  "conversations": [
    {
      "user": "input_content",
      "assistant": "output_content"
    },
    {
      "user": "input_content",
      "assistant": "output_content"
    }
  ]
}
```

### 阶段二：模型选择与训练

#### 模型选择

##### Transformer 架构

- **预训练语言模型微调**：

  - **候选模型**：

    - DeepSeek-R1-Distill-Qwen-7B
    - ChatGLM-4-9b-chat
    - Qwen3-8B

  - **微调方法**：
    - LoRA

---

## RAG 部分

- RAG 部分目的：负责将原文中用户问题对应的答案抽取出来，并将答案作为知识库，用于回答用户的问题。

### 阶段一：数据获取与预处理

#### 源数据处理

- 使用原始文本数据进行切分
  - 按照段落切分
  - 按照章节切分

### 阶段二：模型选择与向量化

#### 模型选择

##### embeddings 模型

- **候选模型**：

  - Qwen3-Embedding-4B

##### CrossEncoder 模型

- **候选模型**

  - bge-reranker-v2-m3

## 提示词工程部分

- 提示词工程部分目的：负责让模型返回的答案更加符合小说风格，更加符合小说语境。

### 阶段一：提示词需求

- 角色一致性维护
  - 需要保证模型回复的语气符合小说中那个角色的风格
- 防止幻觉
  - 需要让模型根据 RAG 检索到的数据进行回复，而不是自己进行推理生成
- 知识边界控制
  - 防止模型可能超出小说设定胡编乱造

## 模型评估部分

- 模型评估部分目的：负责对模型进行评估，评估模型回复的答案是否准确，是否符合小说风格，是否具有角色一致性。

### 阶段一：评估方法

- **候选方法**：

  - BLEU
  - ROUGE
  - METEOR
  - GPT-2

## 系统展示部分

- 系统展示部分目的：负责将训练好的模型通过 web 进行展示。

### 阶段一：系统展示

- **前端框架**：

  - vue3
